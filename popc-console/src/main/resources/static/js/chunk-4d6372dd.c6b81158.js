(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d6372dd"],{"38c6":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",{staticClass:"ep-site__container",staticStyle:{height:"100%"}},[r("el-aside",{staticClass:"ep-aside",attrs:{width:"196px"}},[r("el-header",{staticClass:"ep-aside__header",attrs:{height:"56px"}},[r("div",{staticClass:"header-title"},[r("span",[e._v("人口管控系统")])])]),r("el-menu",{staticClass:"ep-menu",attrs:{router:"","unique-opened":"","default-active":e.$route.path,"background-color":"#001529","text-color":"hsla(0,0%,100%,.65)","active-text-color":"#fff"},on:{open:e.handleOpen,close:e.handleClose}},e._l(e.menuList,(function(t){return r("el-menu-item",{key:t.name,attrs:{index:t.path}},[r("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.name))])])})),1)],1),r("el-container",[r("el-header",{staticClass:"ep-container__header",attrs:{height:"56px"}},[r("div",{staticClass:"user-info"},[r("el-dropdown",{attrs:{trigger:"click"}},[r("span",{staticClass:"el-dropdown-link"},[e._v("\n            欢迎您，"+e._s(e.officerInfo.officerName)),r("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",[r("div",{on:{click:e.signOutFun}},[e._v("退出登录")])]),r("el-dropdown-item",[r("div",{on:{click:e.updateFun}},[e._v("修改密码")])])],1)],1)],1)]),r("el-main",{staticClass:"ep-container__main"},[r("el-breadcrumb",{staticClass:"content-breadcrumb",attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._l(e.routes,(function(t,n){return r("el-breadcrumb-item",{key:n,attrs:{to:{path:t.path}}},[e._v("\n          "+e._s(t.name)+"\n        ")])}))],2),r("div",{staticClass:"content-wrapper"},[r("router-view")],1)],1)],1),r("el-dialog",{attrs:{title:"修改密码","append-to-body":!0,visible:e.dialogVisible,width:"30%",close:e.closeDialog},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{ref:"pwdForm",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"旧密码",prop:"oldPwd"}},[r("el-input",{attrs:{type:"password",size:"small",placeholder:"请输入",clearable:""},model:{value:e.form.oldPwd,callback:function(t){e.$set(e.form,"oldPwd",t)},expression:"form.oldPwd"}})],1),r("el-form-item",{attrs:{label:"新密码",prop:"newPwd"}},[r("el-input",{attrs:{type:"password",size:"small",placeholder:"请输入",clearable:""},model:{value:e.form.newPwd,callback:function(t){e.$set(e.form,"newPwd",t)},expression:"form.newPwd"}})],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:e.closeDialog}},[e._v("取 消")]),r("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.savePwd}},[e._v("确 定")])],1)],1)],1)},o=[],a=(r("8e6e"),r("ac6a"),r("456d"),r("7f7f"),r("e804"),r("bd86")),s=(r("96cf"),r("3b8d")),i=r("a78e"),l=r.n(i),c={pwd:{API:{updatePassword:"user/right/updatePasswordByOfficerNo"}}},u=c,d=r("7c15"),f=u.pwd.API,p={updatePassword:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,r,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,d["a"].get(f["updatePassword"],t);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()};function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(r,!0).forEach((function(t){Object(a["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var w={name:"DefaultLayout",data:function(){return{routes:[],officerInfo:{},menuList:[],dialogVisible:!1,form:{newPwd:"",oldPwd:""},rules:{oldPwd:[{required:!0,message:"请输入旧密码",trigger:"blur"}],newPwd:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,message:"密码最少6个字符",trigger:"blur"}]}}},watch:{$route:"buildRoutes"},created:function(){this.getMenuList(),this.buildRoutes(this.$route,null)},mounted:function(){console.log(this.$route.params)},methods:{getMenuList:function(){if(l.a.get("officerInfo")&&(this.officerInfo=JSON.parse(l.a.get("officerInfo"))),l.a.get("menuList")){var e=JSON.parse(l.a.get("menuList"));this.menuList=e.filter((function(e){return!e.isChildren}))}},signOutFun:function(){l.a.remove("isLogin"),this.$router.push({path:"/login"})},updatePwd:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=m({},this.form,{officerNo:this.officerInfo.officerNo}),e.next=3,p.updatePassword(t);case 3:r=e.sent,r&&(this.$message.success("密码修改成功！"),this.closeDialog());case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),savePwd:function(){var e=this;this.$refs.pwdForm.validate((function(t){if(!t)return!1;e.updatePwd()}))},closeDialog:function(){this.$refs.pwdForm.resetFields(),this.dialogVisible=!1},updateFun:function(){this.dialogVisible=!0},handleOpen:function(e,t){console.log(e,t)},handleClose:function(e,t){console.log(e,t)},buildRoutes:function(e,t){if(!l.a.get("routes")||t){var r,n=t&&t.matched[1],o=e.matched[1];r=t&&o.meta.isChildren?Array.of(n,o):Array.isArray(o)?o:Array.of(o),this.routes=r.map((function(e){return{name:e.meta.name,path:e.path}})),l.a.set("routes",JSON.stringify(this.routes),{expires:365})}else this.routes=JSON.parse(l.a.get("routes"))}}},g=w,b=(r("656d"),r("2877")),v=Object(b["a"])(g,n,o,!1,null,"618280c0",null);t["default"]=v.exports},"656d":function(e,t,r){"use strict";var n=r("f955"),o=r.n(n);o.a},e804:function(e,t,r){"use strict";var n=r("5ca1"),o=r("f1ae");n(n.S+n.F*r("79e5")((function(){function e(){}return!(Array.of.call(e)instanceof e)})),"Array",{of:function(){var e=0,t=arguments.length,r=new("function"==typeof this?this:Array)(t);while(t>e)o(r,e,arguments[e++]);return r.length=t,r}})},f955:function(e,t,r){}}]);
//# sourceMappingURL=chunk-4d6372dd.c6b81158.js.map